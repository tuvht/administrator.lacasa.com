function validateemail(e){var t=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return t.test(e)}function showdialog_process(e,t,a,s,i){if("true"==i){var r=jQuery('<div class="overlay"><div id="popupdialog"></div></div>');r.appendTo(document.body)}else{var o=jQuery('<div id="popupdialog"></div>');o.appendTo(document.body)}if(""==t)var n=window.innerWidth/2+s,l=window.innerHeight/2+a;else var n=$("#"+t).position().top+s,l=$("#"+t).position().left+a;var o=jQuery('<div id="popupdialog"></div>');o.html(""),o.css({"-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px","-moz-box-shadow":"0 0 0px whitesmoke","-webkit-box-shadow":"0 0 0px whitesmoke","box-shadow":"0px 0px 0px lightgrey",border:"0px solid black","font-family":"serif",position:"absolute",top:n,left:l,background:"white","z-index":"11000"}),o.html(e),o.appendTo(document.body)}function removedialog_process(){$("div").remove("#popupdialog"),$("div").remove(".overlay")}function showformsubmitting(){return showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",300,-400,"true"),!0}function selectimage_process(e,t,a){var s=jQuery('<div class="overlay" onmouseover="selectimage_process(this,'+t+');" onmouseout="deselectimage_process(this,'+t+');" ></div>');s.html(""),s.css({opacity:"0.6",position:"absolute",top:$("#"+e.id).position().top+$("#"+e.id).height()/3*2,left:$("#"+e.id).position().left,width:$("#"+e.id).width(),height:$("#"+e.id).height()/3,background:"#f9f9f9","z-index":"11000"}),s.html('<input type="button" onclick = "addtofavorite(\''+t+"','"+a+'\');" value="save for later" />'),s.appendTo(document.body)}function addtofavorite(e,t,a){$.ajax({type:"post",url:"http://kiemtraweb.vn/image/addtofavorite",data:{image_id:t,image_path:a},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',e.id,0,0,"true")},success:function(t){removedialog_process(),$("#header_favorite").html(t),e.src="/application/views/images/favoriteblue.png",e.unbind("click")}})}function removefavorite(e,t,a){$.ajax({type:"post",url:"http://kiemtraweb.vn/image/removefavorite",data:{image_id:t,image_path:a},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(t){removedialog_process(),$("#header_favorite").html(t),e.src="/application/views/images/favoriteblack.png"}})}function deselectimage_process(){removedialog_process()}function cusgetcredit_process(e){$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/getnoofcredit",data:{cus_un:e},beforeSend:function(){},success:function(e){$("#cus_credit").html("You have "+parseInt(e)+" credit(s) left")}})}function customerlogin_process(e,t){$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/login/1",data:{cus_un:e,cus_pw:t},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",300,-400,"true")},success:function(e){if(removedialog_process(),2==parseInt(e))location.reload();else{var t='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Login Failed <span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="2"><div class="dialog_break"></div></td></tr><tr><td colspan="2" sytle="text-align:center"><span>Sorry, system cannot recognize your account and password</span></td></tr><tr style="text-align:center;width:100%"><td colspan="2"><table style="border: 1px transparent;width:100%"><tr style="width:100%;"><td style="text-align:center"><a href="http://kiemtraweb.vn/customer/register">Register</a></td><td style="text-align:center"><a href="http://kiemtraweb.vn/customer/forgotpassword">Forgot your password?</a></td></tr></table></td></tr></table>';showdialog_process(t,"",150,-450,"true")}}})}function customerlogout_process(e){$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/logout",data:{cus_un:e},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",300,-400,"true")},success:function(){removedialog_process(),window.location="http://kiemtraweb.vn"}})}function customersubmitplan_process(e,t){switch($("#item_name").val(e+" credits at shotlancer.com"),e){case"10":$("#amount").val(20);break;case"25":$("#amount").val(35);break;case"50":$("#amount").val(50)}$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/dochooseplan",data:{cusreg_plan:e},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",300,-400,"true")},success:function(){removedialog_process(),""==t?window.location="/customer/register":$("#form_paypal").submit()}})}function checkcuslogin_process(e,t,a,s){""==e?window.location="http://kiemtraweb.vn/customer/chooseplan":checkcuscredit_process(e,t,a,s)}function checkcuscredit_process(e,t,a,s){$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/getnoofcredit",data:{cus_un:e},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(i){if(removedialog_process(),parseInt(i)<parseInt(t)){var r='<table style="border: 1px transparent;"> <tr style="text-align:center;width:100%;background-color: black"><td><span style="font-family:serif;font-size:large;text-align:center;color:white;">Download Failed</span></td><td><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></td></tr><tr sytle="text-align:center;width:100%"><td colspan="2" style="text-align:center"><span style="text-align:center">Your account does not have enough credit left to download the picture, please purchase more.</span></td></tr><tr style="text-align:center;width:100%"><td colspan="2"><a href="http://kiemtraweb.vn/customer/chooseplan">Purchase</a></td></tr></table>';showdialog_process(r,"",-150,-150,"true"),preventDefault()}else cusdownloadimage_process(e,t,a,s)}})}function cusdownloadimage_process(e,t,a,s){$.ajax({type:"post",url:"http://kiemtraweb.vn/image/download",data:{hidden_imageid:a,hidden_imagepath:s},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),cusinsertdownload_process(a,s)}})}function cusinsertdownload_process(e,t){$.ajax({type:"post",url:"http://kiemtraweb.vn/image/insertdownload",data:{hidden_imageid:e,hidden_imagepath:t},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),window.location="http://kiemtraweb.vn"}})}function checkcususernameexist(e){var t;return $.ajax({type:"post",async:!1,url:"http://kiemtraweb.vn/customer/checkexist",data:{val:e,field:"username"},success:function(e){t=e}}),t}function checkcusemailexist(e){var t;return $.ajax({type:"post",async:!1,url:"http://kiemtraweb.vn/customer/checkexist",data:{val:e,field:"email"},success:function(e){t=e}}),t}function validate_field(e){switch(e){case"cusreg_un":return $("#"+e).val().length<4?($("#val_cus_register_un").text("Username must be from 4 - 40 characters"),!1):0!=checkcususernameexist($("#"+e).val())?($("#val_cus_register_un").text("This username is already in our system. Please choose another one"),!1):($("#val_cus_register_un").text(""),!0);case"cusreg_pw":return $("#"+e).val().length<5?($("#val_cus_register_pw").text("Password must be from 5 - 40 characters"),!1):($("#val_cus_register_pw").text(""),!0);case"cusreg_repw":return $("#"+e).val()!=$("#cusreg_pw").val()?($("#val_cus_register_repw").text("Password confirmation is not correct"),!1):($("#val_cus_register_repw").text(""),!0);case"cusreg_name":return $("#"+e).val().length<5?($("#val_cus_register_name").text("Name must be from 5 - 40 characters"),!1):($("#val_cus_register_name").text(""),!0);case"cusreg_address":return $("#"+e).val().length<10?($("#val_cus_register_address").text("Address must be from 10 - 100 characters"),!1):($("#val_cus_register_name").text(""),!0);case"cusreg_email":return validateemail($("#"+e).val())?0!=checkcusemailexist($("#"+e).val())?($("#val_cus_register_email").text("This email address is already in our system. Please choose another one"),!1):($("#val_cus_register_email").text(""),!0):($("#val_cus_register_email").text("Please input valid email address"),!1)}}function cusregistervalidateform_process(){var e=!0;if($("#cusreg_un").change(),$("#cusreg_pw").change(),$("#cusreg_repw").change(),$("#cusreg_name").change(),$("#cusreg_email").change(),$("#cusreg_address").change(),0==$("#cusreg_un").val().length&&(e=!1,$("#val_cus_register_un").text("Required field")),0==$("#cusreg_pw").val().length&&(e=!1,$("#val_cus_register_pw").text("Required field")),0==$("#cusreg_repw").val().length&&(e=!1,$("#val_cus_register_repw").text("Required field")),0==$("#cusreg_name").val().length&&(e=!1,$("#val_cus_register_name").text("Required field")),0==$("#cusreg_email").val().length&&(e=!1,$("#val_cus_register_email").text("Required field")),0==$("#cusreg_address").val().length&&(e=!1,$("#val_cus_register_address").text("Required field")),e){var t=validate_field("cusreg_un"),a=validate_field("cusreg_pw"),s=validate_field("cusreg_repw"),i=validate_field("cusreg_name"),r=validate_field("cusreg_email"),o=validate_field("cusreg_address");if(!(t&&a&&s&&i&&r&&o))return!1;cusregister_process()}return!1}function cusregister_process(){switch($("#item_name").val($("#plantype").val()+" credits at shotlancer.com"),$("#plantype").val()){case"10":$("#amount").val(20);break;case"25":$("#amount").val(35);break;case"50":$("#amount").val(50)}$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/doregister",data:{cusreg_type:$("input[name=cusreg_type]:checked").val(),cusreg_un:$("#cusreg_un").val(),cusreg_pw:document.getElementById("cusreg_pw").value,cusreg_name:document.getElementById("cusreg_name").value,cusreg_email:document.getElementById("cusreg_email").value,cusreg_about:document.getElementById("cusreg_about").value,cusreg_phone:document.getElementById("cusreg_phone").value,cusreg_address:document.getElementById("cusreg_address").value,cusreg_country:document.getElementById("cusreg_country").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),$("#form_paypal").submit()}})}function cusaccountform_update(e){var t=e.id,a=t.substr(7,t.length-7),s=t.substr(27,t.length-27),i=$("#"+a).val(),r=document.getElementById("cus_editcusid").value,o=!0;$("#val_cus_editinformation_name").text(""),$("#val_cus_editinformation_email").text(""),$("#val_cus_editinformation_address").text(""),$("#val_cus_editinformation_purpose").text(""),$("#val_cus_editinformation_about").text(""),"cus_editinformation_name"==a?$("#"+a).val().length<5&&(o=!1,$("#val_cus_editinformation_name").text("Please input from 5 - 40 characters value for your name")):"cus_editinformation_email"==a?(i=i.toString(),validateemail($("#"+a).val())||($("#val_cus_editinformation_email").text("Please input valid email address"),o=!1),0!=checkcusemailexist($("#"+a).val())&&($("#val_cus_editinformation_email").text("This email address is already in our system. Please choose another one"),o=!1)):"cus_editinformation_address"==a&&(i=i.toString(),$("#"+a).val().length<10&&(o=!1,$("#val_cus_editinformation_address").text("Please input from 10 - 100 characters value for your name"))),o&&(cusaccountdetail_update(t,s,i,r,a),$("#"+a).prop("hidden",!0),$("#hidden_"+a).text(i),$("#hidden_"+a).show(),$("#update_"+a).prop("hidden",!0),$("#cancel_"+a).prop("hidden",!0),$("#btn_"+a).prop("hidden",!1))}function cusaccountdetail_update(e,t,a,s,i){$.ajax({type:"post",url:"http://kiemtraweb.vn/customer/updatedetail",data:{cus_editcusid:s,cus_editfield:t,cus_editvalue:a},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',e,0,0,"true")},success:function(){removedialog_process(),$("#msg_"+i).html("Update successfully"),$("#msg_"+i).fadeIn().delay(1200).fadeOut()}})}function usersubmitplan_process(e){switch($("#item_name").val(e+" picture slots at shotlancer.com"),e){case"20":$("#amount").val(8);break;case"40":$("#amount").val(15);break;case"80":$("#amount").val(28)}$.ajax({type:"post",url:"http://kiemtraweb.vn/user/dochooseplan",data:{userreg_plan:e},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),$("#form_paypal").submit()}})}function usergetcredit_process(e,t){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/getnoofimage",data:{user_un:e},beforeSend:function(){},success:function(e){$("#"+t).html("You can still upload "+parseInt(e)+" picture(s)")}})}function userlogin_process(e,t,a){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/login",data:{user_un:e,user_pw:t},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",300,-400,"true")},success:function(e){if(removedialog_process(),2==parseInt(e))window.location=a;else{var t='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Login Failed <span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="2"><div class="dialog_break"></div></td></tr><tr><td colspan="2" sytle="text-align:center"><span>Sorry, system cannot recognize your account and password</span></td></tr><tr style="text-align:center;width:100%"><td colspan="2"><table style="border: 1px transparent;width:100%"><tr style="width:100%;"><td style="text-align:center"><a href="http://kiemtraweb.vn/user/register">Register</a></td><td style="text-align:center"><a href="http://kiemtraweb.vn/user/forgotpassword">Forgot your password?</a></td></tr></table></td></tr></table>';showdialog_process(t,"",100,-400,"true")}}})}function userlogout_process(e){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/logout",data:{user_un:e},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),window.location="/"}})}function checkuserusernameexist(e){var t;return $.ajax({type:"post",async:!1,url:"http://kiemtraweb.vn/user/checkexist",data:{val:e,field:"username"},success:function(e){t=e}}),t}function checkuseremailexist(e){var t;return $.ajax({type:"post",async:!1,url:"http://kiemtraweb.vn/user/checkexist",data:{val:e,field:"email"},success:function(e){t=e}}),t}function userregisterfield_validate(e){switch(e){case"userreg_un":return $("#"+e).val().length<4?($("#val_user_register_un").text("Username must be from 4 - 40 characters"),!1):0!=checkuserusernameexist($("#"+e).val())?($("#val_user_register_un").text("This username is already in our system. Please choose another one"),!1):($("#val_user_register_un").text(""),!0);case"userreg_pw":return $("#"+e).val().length<5?($("#val_user_register_pw").text("Password must be from 5 - 40 characters"),!1):($("#val_user_register_pw").text(""),!0);case"userreg_repw":return $("#"+e).val()!=$("#userreg_pw").val()?($("#val_user_register_repw").text("Password confirmation is not correct"),!1):($("#val_user_register_repw").text(""),!0);case"userreg_name":return $("#"+e).val().length<5?($("#val_user_register_name").text("Name must be from 5 - 40 characters"),!1):($("#val_user_register_name").text(""),!0);case"userreg_address":return $("#"+e).val().length<10?($("#val_user_register_address").text("Address must be from 10 - 100 characters"),!1):($("#val_user_register_address").text(""),!0);case"userreg_paypal":return $("#"+e).val().length<5?($("#val_user_register_paypal").text("Please input valid Paypal account"),!1):($("#val_user_register_paypal").text(""),!0);case"userreg_email":return validateemail($("#"+e).val())?0!=checkuseremailexist($("#"+e).val())?($("#val_user_register_email").text("This email address is already in our system. Please choose another one"),!1):($("#val_user_register_email").text(""),!0):($("#val_user_register_email").text("Please input valid email address"),!1)}}function userregisterform_validate(){var e=!0;if($("#userreg_un").change(),$("#userreg_pw").change(),$("#userreg_repw").change(),$("#userreg_name").change(),$("#userreg_email").change(),$("#userreg_address").change(),$("#userreg_paypal").change(),0==$("#userreg_un").val().length&&(e=!1,$("#val_user_register_un").text("Required field")),0==$("#userreg_pw").val().length&&(e=!1,$("#val_user_register_pw").text("Required field")),0==$("#userreg_repw").val().length&&(e=!1,$("#val_user_register_repw").text("Required field")),0==$("#userreg_name").val().length&&(e=!1,$("#val_user_register_name").text("Required field")),0==$("#userreg_email").val().length&&(e=!1,$("#val_user_register_email").text("Required field")),0==$("#userreg_address").val().length&&(e=!1,$("#val_user_register_address").text("Required field")),0==$("#userreg_paypal").val().length&&(e=!1,$("#val_user_register_paypal").text("Required field")),e){var t=userregisterfield_validate("userreg_un"),a=userregisterfield_validate("userreg_pw"),s=userregisterfield_validate("userreg_repw"),i=userregisterfield_validate("userreg_email"),r=userregisterfield_validate("userreg_name"),o=userregisterfield_validate("userreg_address"),n=userregisterfield_validate("userreg_paypal");if(!(t&&a&&s&&r&&i&&o&&n))return!1;userregister_process()}return!1}function userregister_process(){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/doregister",data:{userreg_type:$("input[name=userreg_type]:checked").val(),userreg_un:$("#userreg_un").val(),userreg_pw:document.getElementById("userreg_pw").value,userreg_name:document.getElementById("userreg_name").value,userreg_email:document.getElementById("userreg_email").value,userreg_about:document.getElementById("userreg_about").value,userreg_phone:document.getElementById("userreg_phone").value,userreg_address:document.getElementById("userreg_address").value,userreg_country:document.getElementById("userreg_country").value,userreg_paypal:document.getElementById("userreg_paypal").value,userreg_noofpics:document.getElementById("userreg_noofpics").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),window.location="http://kiemtraweb.vn/user/home"}})}function usertokenize(e,t){$("#"+e).tokenize({datas:"http://kiemtraweb.vn/data_picdesc.php",maxElements:10,valueField:"text",defaulttokens:t})}function overlaycontrol(e){var t=jQuery('<div id="overlaydiv"></div>');t.css({opacity:.4,position:"absolute",top:$(e).position().top,left:$(e).position().left,"background-color":"#EBEBE4",width:$(e).width(),height:$(e).height(),"z-index":5e3}),t.appendTo(document.body)}function enable_form_control(e,t){var a=e.id,s=a.substr(4,a.length-4);$("#hidden_"+s).hide(),$("#"+s).prop("hidden",!1),$("#"+s).select(),$("#update_"+s).prop("hidden",!1),$("#cancel_"+s).prop("hidden",!1),$("#btn_"+s).prop("hidden",!0),"true"==t&&$("div").remove("#overlaydiv"),window.current_value=$("#"+s).val()}function cancel_form_control(e){var t=e.id,a=t.substr(7,t.length-7);$("#hidden_"+a).show(),$("#hidden_"+a).val(current_value),$("#"+a).val(window.current_value),$("#"+a).prop("hidden",!0),$("#update_"+a).prop("hidden",!0),$("#cancel_"+a).prop("hidden",!0),$("#btn_"+a).prop("hidden",!1),$("#val_user_editimagetitle").text(""),$("#val_user_editimagedescription").text(""),$("#val_user_editimagetags").text(""),$("#val_user_editinformation_name").text(""),$("#val_user_editinformation_email").text(""),$("#val_user_editinformation_paypalaccount").text(""),$("#val_cus_editinformation_name").text(""),$("#val_cus_editinformation_email").text(""),$("#val_cus_editinformation_address").text(""),$("#val_cus_editinformation_purpose").text(""),$("#val_cus_editinformation_about").text(""),"user_editimagetags"==a&&($("div").remove(".Tokenize"),usertokenize("user_editimagetags",current_tags),overlaycontrol("div.Tokenize"))}function user_update_form_control(e){var t=e.id,a=t.substr(7,t.length-7),s=t.substr(21,t.length-21),i=$("#"+a).val(),r=document.getElementById("user_editimageid").value,o=!0;$("#val_user_editimagetitle").text(""),$("#val_user_editimagedescription").text(""),$("#val_user_editimagetags").text(""),"user_editimagetitle"==a?$("#"+a).val().length<10&&(o=!1,$("#val_user_editimagetitle").text("Please set a short title from 10 - 50 characters for your picture")):"user_editimagetags"==a&&(i=i.toString(),$("#user_editimagetags option:selected").length<=2&&(o=!1,$("#val_user_editimagetags").text("Please choose 3 - 10 tags for your pictures so people can search easily"))),o&&($("#"+a).prop("hidden",!0),$("#hidden_"+a).text(i),"user_editimagetype"==a&&$("#hidden_"+a).text($("#"+a+" option[value='"+i+"']").text()),$("#hidden_"+a).show(),$("#update_"+a).prop("hidden",!0),$("#cancel_"+a).prop("hidden",!0),$("#btn_"+a).prop("hidden",!1),user_update_image_detail(s,i,r,a),"user_editimagetags"==a&&overlaycontrol("div.Tokenize"))}function user_update_image_detail(e,t,a,s){$.ajax({type:"post",url:"http://kiemtraweb.vn/image/updatedetail",data:{image_editimageid:a,image_editfield:e,image_editvalue:t},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),$("#msg_"+s).html("Update successfully"),$("#msg_"+s).fadeIn().delay(1200).fadeOut()}})}function userdeleteimage_confirm(){var e='<table style="border: 1px transparent;"> <tr style="text-align:center;width:100%;background-color: black"><td colspan="2"><span style="font-family:serif;font-size:large;text-align:center;color:white;">Confirmation</span></td></tr><tr sytle="text-align:center;width:100%"><td colspan="2" style="text-align:center"><span style="text-align:center">Are you sure want to delete this picture?</span></td></tr><tr style="text-align:center;width:100%"><td><input type="button" value="Yes" onclick="userdeleteimage_process();"/></td><td><input type="button" value="Cancel" onclick="removedialog_process();"/></td></tr></table>';showdialog_process(e,"",-150,-150,"true")}function userdeleteimage_process(){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/deleteimage",data:{user_deleteimageid:document.getElementById("user_deleteimageid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(){removedialog_process(),window.location="http://kiemtraweb.vn/user/myaccount"}})}function selectmenu(e){e.bgColor="grey";var t=$("#"+e.id+" > .user_imagepopup_menuitem");t.css("color","white")}function deselectmenu(e){e.bgColor="white";var t=$("#"+e.id+" > .user_imagepopup_menuitem");t.css("color","black")}function usermoreviewoption_show(e){var t='<div class="standard-dropdown"><table id="viewmoredialog" name="viewmoredialog" onmouseover="usermoreviewoption_show(this);" onmouseleave="removedialog_process();" style="border: 1px transparent;"> <tr><td id="td_menu1" onmouseout="deselectmenu(this);" onmouseover="selectmenu(this);"><a id="a_menu1" class="user_imagepopup_menuitem" onclick="usertopdownload_show();">Top most 20 download</a></td></tr><tr><td id="td_menu2" onmouseout="deselectmenu(this);" onmouseover="selectmenu(this);"><a class="user_imagepopup_menuitem" onclick="usertopvalue_show();">Top 10 high value</a></td></tr><tr><td id="td_menu3" onmouseout="deselectmenu(this);" onmouseover="selectmenu(this);"><a class="user_imagepopup_menuitem" onclick="usernodownload_show();">No download list</a></td></tr><tr><td id="td_menu4" onmouseout="deselectmenu(this);" onmouseover="selectmenu(this);"><a class="user_imagepopup_menuitem" onclick="userfulldownload_show();">Full download history</a></td></tr></table></div>';showdialog_process(t,e.id,0,30,"false")}function usertopdownload_show(){$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/gettopdownload/20",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"btn_showmorepic",60,-50,"true")},success:function(e){removedialog_process();var t=JSON.parse(e),a='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="5" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Top most 20 download pictures <span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="5"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image Title</span></td><td><span class="user_account_info_label">Price</span></td><td><span class="user_account_info_label">Download Times</span></td><td><span class="user_account_info_label">Last Download</span></td></tr>';if(t.length>0)for(i=0;i<t.length;i++)a=a+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+t[i].imageid+"' style='text-decoration: none;cursor:pointer;color:black'>"+t[i].title+"</a></td><td class='user_imagepopup_content'>"+t[i].price+"</td><td class='user_imagepopup_content'>"+t[i].downloadtime+"</td><td class='user_imagepopup_content'>"+t[i].downloaddate+"</td></tr>";else a+='<tr><td colspan="5"><span class="user_account_info_value">There is no download history yet</span></td></tr>';a+="</table>",showdialog_process(a,"btn_showmorepic",60,0,"true")}})}function usertopvalue_show(){$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/gettopvalue/10",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"btn_showmorepic",60,-50,"true")},success:function(e){removedialog_process();var t=JSON.parse(e),a='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="5" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Top 10 pictures has highest price<span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="5"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image Title</span></td><td><span class="user_account_info_label">Price</span></td><td><span class="user_account_info_label">Download Times</span></td><td><span class="user_account_info_label">Upload Date</span></td></tr>';if(t.length>0)for(i=0;i<t.length;i++)a=a+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+t[i].imageid+"' style='text-decoration: none;cursor:pointer;color:black'>"+t[i].title+"</a></td><td class='user_imagepopup_content'>"+t[i].price+"</td><td class='user_imagepopup_content'>"+t[i].downloadtime+"</td><td class='user_imagepopup_content'>"+t[i].downloaddate+"</td></tr>";else a+='<tr><td colspan="5"><span class="user_account_info_value">There is no download history yet</span></td></tr>';a+="</table>",showdialog_process(a,"btn_showmorepic",60,0,"true")}})}function usernodownload_show(){$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/getnodownload",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"btn_showmorepic",60,-50,"true")},success:function(e){removedialog_process();var t=JSON.parse(e),a='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="5" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Pictures that has not been downloaded yet<span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="5"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image Title</span></td><td><span class="user_account_info_label">Price</span></td><td><span class="user_account_info_label">Upload Date</span></td><td><span class="user_account_info_label">Last Update</span></td></tr>';if(t.length>0)for(i=0;i<t.length;i++)a=a+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+t[i].imageid+"' style='text-decoration: none;cursor:pointer;color:black'>"+t[i].title+"</a></td><td class='user_imagepopup_content'>"+t[i].price+"</td><td class='user_imagepopup_content'>"+t[i].downloadtime+"</td><td class='user_imagepopup_content'>"+t[i].downloaddate+"</td></tr>";else a+='<tr><td colspan="5"><span class="user_account_info_value">There is no download history yet</span></td></tr>';a+="</table>",showdialog_process(a,"btn_showmorepic",60,0,"true")}})}function userfulldownload_show(){$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/getalldownload",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"btn_showmorepic",60,-50,"true")},success:function(e){removedialog_process();var t=JSON.parse(e),a='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="5" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Full download history<span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="5"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%;"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image Title</span></td><td><span class="user_account_info_label">Price</span></td><td><span class="user_account_info_label">Download Times</span></td><td><span class="user_account_info_label">Last Download</span></td></tr>';
if(t.length>0)for(i=0;i<t.length;i++)a=a+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+t[i].imageid+"' style='text-decoration: none;cursor:pointer;color:black'>"+t[i].title+"</a></td><td class='user_imagepopup_content'>"+t[i].price+"</td><td class='user_imagepopup_content'>"+t[i].downloadtime+"</td><td class='user_imagepopup_content'>"+t[i].downloaddate+"</td></tr>";else a+='<tr><td colspan="5"><span class="user_account_info_value">There is no download history yet</span></td></tr>';a+="</table>",showdialog_process(a,"btn_showmorepic",60,0,"true")}})}function show_upcomingpayment(e){$("#dialog_viewmoreimage").html(""),$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/getupcomingpayment",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(t){removedialog_process();var a=JSON.parse(t),s='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="5" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Upcoming Payments <span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="5"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%;"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image</span></td><td><span class="user_account_info_label">Value</span></td><td><span class="user_account_info_label">Available Date</span></td><td><span class="user_account_info_label">Expected Payment Date</span></td></tr>';if(a.length>0)for(i=0;i<a.length;i++)s=s+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+a[i].image_id+"' style='text-decoration: none;cursor:pointer;color:black'>"+a[i].title+"</a></td><td class='user_imagepopup_content'>"+a[i].value+" USD</td><td class='user_imagepopup_content'>"+a[i].date+"</td><td class='user_imagepopup_content'>"+a[i].expected_date+"</td></tr>";else s+='<tr><td colspan="5"><span class="user_account_info_value">There is no upcoming payment</span></td></tr>';s+="</table>",showdialog_process(s,e.id,-400,0,"true")}})}function show_historypayment(e){$("#dialog_viewmoreimage").html(""),$.ajax({type:"post",dataType:"text",url:"http://kiemtraweb.vn/user/gethistorypayment",data:{user_un:document.getElementById("user_edituserid").value},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',"",-150,-150,"true")},success:function(t){removedialog_process();var a=JSON.parse(t),s='<table style="margin:0;padding:0;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px"><tr style="background-color: #D8D8D8;width:100%;"><td colspan="7" style="width:100%;color:black;font-family:serif;font-decoration: bold;font-size:x-large;text-align:center;">Payment History<span style="vertical-align:middle;float:right;display:table-cell"><img width="18" height="15" src="/application/views/images/closebutton.png" onclick="removedialog_process();"/></span></td></tr><tr><td colspan="7"><div class="dialog_break"></div></td></tr><tr sytle="text-align:center;width:100%;"><td><span class="user_account_info_label">No</span></td><td><span class="user_account_info_label">Image</span></td><td><span class="user_account_info_label">Value</span></td><td><span class="user_account_info_label">Available Date</span></td><td><span class="user_account_info_label">Actual Payment Date</span></td><td><span class="user_account_info_label">Transaction ID</span></td><td><span class="user_account_info_label">Receive Account</span></td></tr>';if(a.length>0)for(i=0;i<a.length;i++)s=s+"<tr><td class='user_imagepopup_content'>"+(i+1)+"</td><td class='user_imagepopup_content'><a href='/user/viewimage/"+a[i].image_id+"' style='text-decoration: none;cursor:pointer;color:black'>"+a[i].title+"</a></td><td class='user_imagepopup_content'>"+a[i].value+" USD</td><td class='user_imagepopup_content'>"+a[i].date+"</td><td class='user_imagepopup_content'>"+a[i].actual_date+"</td><td class='user_imagepopup_content'>"+a[i].transaction_id+"</td><td class='user_imagepopup_content'>"+a[i].receive_account+"</td></tr>";else s+='<tr><td colspan="7"><span class="user_account_info_value">There is no payment yet</span></td></tr>';s+="</table>",showdialog_process(s,e.id,-400,0,"true")}})}function useraccountform_update(e){var t=e.id,a=t.substr(7,t.length-7),s=t.substr(28,t.length-28),i=$("#"+a).val(),r=document.getElementById("user_edituserid").value,o=!0;$("#val_user_editinformation_name").text(""),$("#val_user_editinformation_email").text(""),$("#val_user_editinformation_paypalaccount").text(""),"user_editinformation_name"==a?$("#"+a).val().length<10&&(o=!1,$("#val_user_editinformation_name").text("Please give from 10 - 35 characters value for your name")):"user_editinformation_email"==a?(i=i.toString(),validateemail($("#"+a).val())||($("#val_user_editinformation_email").text("Please input valid email address"),o=!1),0!=checkcusemailexist($("#"+a).val())&&($("#val_user_editinformation_email").text("This email address is already in our system. Please choose another one"),o=!1)):"user_editinformation_paypalaccount"==a&&(i=i.toString(),$("#"+a).val().length<1&&(o=!1,$("#val_user_editinformation_paypalaccount").text("Please input valid Paypal account"))),o&&(useraccountdetail_update(t,s,i,r,a),$("#"+a).prop("hidden",!0),$("#hidden_"+a).text(i),$("#hidden_"+a).show(),$("#update_"+a).prop("hidden",!0),$("#cancel_"+a).prop("hidden",!0),$("#btn_"+a).prop("hidden",!1))}function useraccountdetail_update(e,t,a,s,i){$.ajax({type:"post",url:"http://kiemtraweb.vn/user/updatedetail",data:{user_edituserid:s,user_editfield:t,user_editvalue:a},beforeSend:function(){showdialog_process('<div><img width="50" height ="50" src="/application/views/images/loading.gif" /></div>',e,0,0,"true")},success:function(){removedialog_process(),$("#msg_"+i).html("Update successfully"),$("#msg_"+i).fadeIn().delay(1200).fadeOut()}})}